CREATE DATABASE Db_Template;
GO
USE Db_Template;
go

CREATE TABLE rols(
	id INT PRIMARY KEY IDENTITY(1,1),
	name VARCHAR(10),
	description VARCHAR(15)
	);

CREATE TABLE accounts(
	id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	acount VARCHAR(30),
	pount VARCHAR(30),
	roleId INT,
	FOREIGN KEY (roleId) REFERENCES rols(id) ON UPDATE CASCADE ON DELETE CASCADE
	);

CREATE TABLE customers(
	id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	account UNIQUEIDENTIFIER,
	name VARCHAR(30),
	lastNames VARCHAR(30),
	addres VARCHAR(50),
	active BIT not null,
	FOREIGN KEY (account) REFERENCES accounts(id) ON UPDATE CASCADE ON DELETE CASCADE
	);

CREATE TABLE stores(
	id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	branch VARCHAR(45),
	addres VARCHAR(50),
	active BIT not null
	);

CREATE TABLE articles(
	id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	code VARCHAR(30),
	description VARCHAR(30),
	price FLOAT,
	image VARCHAR(30),
	stock INT,
	active BIT not null
	);

CREATE TABLE storeArticle(
	id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	store UNIQUEIDENTIFIER,
	article UNIQUEIDENTIFIER,
	date DATETIME,
	FOREIGN KEY (store) REFERENCES stores(id) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (article) REFERENCES articles(id) ON UPDATE CASCADE ON DELETE CASCADE
	);

CREATE TABLE cuatomerArticle(
	id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
	cuatomer UNIQUEIDENTIFIER,
	article UNIQUEIDENTIFIER,
	date DATETIME,
	FOREIGN KEY (cuatomer) REFERENCES customers(id) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (article) REFERENCES articles(id) ON UPDATE CASCADE ON DELETE CASCADE
	);